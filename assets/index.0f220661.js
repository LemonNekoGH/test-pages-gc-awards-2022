import{a as O,d as N,r as B,c as S,o as R,b as D,e as w,f as F,u as g,g as q,w as c,t as M,h as d,i as W,F as G,j as H,k as K,l as z,m as v,n as f,E as h,p as J,q as Q,s as X,v as Y,x as Z}from"./vendor.a601b76f.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function u(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(t){if(t.ep)return;t.ep=!0;const a=u(t);fetch(t.href,a)}};j();const ee=o=>{const e=new window.FormData;for(let u in o)typeof o[u]!="function"&&typeof o[u]!="symbol"&&typeof o[u]!="object"&&e.set(u,o[u]);return e},E=async(o,e,u)=>{try{let n={};u&&(n={"x-token-u":u,"content-type":"multipart/form-data"});const t=ee(e);return t.set("act",o),(await O.post("http://f.gamecreator.com.cn/sdk/matchApi.php",t,{headers:n})).data}catch(n){const t=n;return`Error: ${t.name}, Status: ${t.code}, Message: ${t.message}`}},V={async login(o){const e=await E("login",o);return typeof e=="string"?"\u7F51\u7EDC\u9519\u8BEF\uFF1A"+e:e.code!==200?!1:e.data},async signup(o,e){const u=await E("signup",o,e);if(typeof u=="string")return"\u7F51\u7EDC\u9519\u8BEF\uFF1A"+u;if(u.code===402)return"\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u52FF\u91CD\u590D\u63D0\u4EA4";if(u.code===401)return"\u8EAB\u4EFD\u9A8C\u8BC1\u5DF2\u8FC7\u671F\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55\u540E\u518D\u63D0\u4EA4";if(u.code===200)return!0;throw new Error("\u4E0D\u5E94\u8BE5\u6267\u884C\u5230\u8FD9\u6765")},async getSignupInfo(o){const e=await E("signupInfo",void 0,o);if(console.log(e),typeof e=="string")return"\u7F51\u7EDC\u9519\u8BEF\uFF1A"+e;if(e.code===401)return Array.isArray(e.data)?null:!1;if(e.code===200)return e.data;throw new Error("\u4E0D\u5E94\u8BE5\u6267\u884C\u5230\u8FD9\u6765")},async getWorks(){const o=await E("works",void 0);if(typeof o=="string")return"\u7F51\u7EDC\u9519\u8BEF\uFF1A"+o;if(o.code===401)return!1;if(o.code===200)return o.data;throw new Error("\u4E0D\u5E94\u8BE5\u6267\u884C\u5230\u8FD9\u6765")}};const te=F("h1",{class:"title"}," 2022 GC \u6E38\u620F\u521B\u4F5C\u5927\u8D5B\u9875\u9762 ",-1),oe={class:"login-area"},ue=f(" \u767B\u5F55 "),ne={key:1},se={class:"routes"},re=f(" \u9996\u9875 "),ae=f(" \u53C2\u8D5B\u4F5C\u54C1 "),ie=f(" \u62A5\u540D\u901A\u9053 "),le=f(" \u5F80\u671F\u8D5B\u4E8B "),ce=F("div",{style:{height:"16px"}},null,-1),de=F("span",null,"\u4F7F\u7528 GC \u8D26\u53F7\u767B\u5F55",-1),pe=f(" \u53D6\u6D88 "),fe=f(" \u767B\u5F55 "),me=N({setup(o){const e=H(),u=K(),n=s=>u.path===s?"primary":"default",t=B(!1),a=B(!1),r=B({username:"",password:""}),C=()=>window.open("http://f.gamecreator.com.cn/gcsitev2/gc2021indiegameAwards","_blank"),k=()=>{if(!r.value.password||!r.value.username){h.warning("\u8BF7\u5148\u8F93\u5165\u7528\u6237\u540D\u6216\u5BC6\u7801");return}t.value=!0,V.login(r.value).then(s=>{t.value=!1,typeof s=="string"?h.error("\u51FA\u9519\u4E86\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF0C"+s):typeof s=="boolean"?h.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"):(h.success("\u767B\u5F55\u6210\u529F"),_(s.token),y(s.uid),localStorage.setItem("gcUserToken",s.token),localStorage.setItem("gcUserId",String(s.uid)),A())})},A=()=>{r.value={username:"",password:""},a.value=!1},m=z(),L=S(()=>m.state.token),$=S(()=>m.state.uid),_=s=>m.commit("setToken",s),P=s=>m.commit("setSignupInfo",s),y=s=>m.commit("setUserId",s);return R(()=>{const s=localStorage.getItem("gcUserToken"),i=localStorage.getItem("gcUserId");s?V.getSignupInfo(s).then(l=>{typeof l=="string"?console.warn("\u83B7\u53D6\u62A5\u540D\u4FE1\u606F\u65F6\u51FA\u73B0\u9519\u8BEF\uFF0C"+l):typeof l=="boolean"?(y(),_()):l?(P(l),_(s),y(parseInt(i))):(y(parseInt(i)),_(s))}):(localStorage.removeItem("gcUserToken"),localStorage.removeItem("gcUserId"))}),(s,i)=>{const l=v("el-button"),T=v("router-view"),I=v("el-input"),b=v("el-dialog");return D(),w(G,null,[te,F("div",oe,[g(L)?(D(),w("span",ne,"\u5DF2\u7ECF\u767B\u5F55\uFF0Cuid: "+M(g($)),1)):(D(),q(l,{key:0,onClick:i[0]||(i[0]=p=>a.value=!0)},{default:c(()=>[ue]),_:1}))]),F("div",se,[d(l,{onClick:i[1]||(i[1]=p=>g(e).push("/")),type:n("/")},{default:c(()=>[re]),_:1},8,["type"]),d(l,{onClick:i[2]||(i[2]=p=>g(e).push("/works")),type:n("/works")},{default:c(()=>[ae]),_:1},8,["type"]),d(l,{onClick:i[3]||(i[3]=p=>g(e).push("/signup")),type:n("/signup")},{default:c(()=>[ie]),_:1},8,["type"]),d(l,{onClick:C},{default:c(()=>[le]),_:1}),W("",!0)]),d(T),d(b,{"close-on-click-modal":!1,"show-close":!1,"close-on-press-escape":!1,modelValue:a.value,"onUpdate:modelValue":i[7]||(i[7]=p=>a.value=p)},{title:c(()=>[de]),footer:c(()=>[d(l,{onClick:A,loading:t.value},{default:c(()=>[pe]),_:1},8,["loading"]),d(l,{onClick:k,loading:t.value,type:"primary"},{default:c(()=>[fe]),_:1},8,["loading"])]),default:c(()=>[d(I,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",modelValue:r.value.username,"onUpdate:modelValue":i[5]||(i[5]=p=>r.value.username=p)},null,8,["modelValue"]),ce,d(I,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",modelValue:r.value.password,"onUpdate:modelValue":i[6]||(i[6]=p=>r.value.password=p)},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),ge="modulepreload",x={},Fe="/",U=function(e,u){return!u||u.length===0?e():Promise.all(u.map(n=>{if(n=`${Fe}${n}`,n in x)return;x[n]=!0;const t=n.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const r=document.createElement("link");if(r.rel=t?"stylesheet":ge,t||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),t)return new Promise((C,k)=>{r.addEventListener("load",C),r.addEventListener("error",k)})})).then(()=>e())};var _e=(o,e)=>{const u=o.__vccOpts||o;for(const[n,t]of e)u[n]=t;return u};const ye={};function ve(o,e){return D(),w("h1",null,"\u8FD9\u662F\u9996\u9875")}var he=_e(ye,[["render",ve]]);const Ee=[{name:"index",path:"/",component:he,props:!0},{name:"signup",path:"/signup",component:()=>U(()=>import("./signup.765ecd93.js"),["assets/signup.765ecd93.js","assets/vendor.a601b76f.js"]),props:!0},{name:"works",path:"/works",component:()=>U(()=>import("./works.77b6060d.js"),["assets/works.77b6060d.js","assets/vendor.a601b76f.js"]),props:!0}];const De=J({routes:Ee,history:Q()}),Ce=X({state:{},mutations:{setToken(o,e){o.token=e},setSignupInfo(o,e){o.signupInfo=e},setUserId(o,e){o.uid=e}}});Y(me).use(De).use(Ce).use(Z).mount("#app");export{_e as _};
